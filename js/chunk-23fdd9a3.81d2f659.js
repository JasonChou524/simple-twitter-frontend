(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23fdd9a3"],{"235d":function(s,e,t){"use strict";t("2466")},2466:function(s,e,t){},"5c9c":function(s,e,t){"use strict";t.r(e);var a=function(){var s=this,e=s._self._c;return e("div",{staticClass:"container"},[e("section",[s._m(0),e("h3",[s._v("建立你的帳號")]),e("user-form",{attrs:{"is-processing":s.isProcessing},on:{"after-submit":s.userSignUp}}),e("nav",[e("router-link",{staticClass:"nav-link",attrs:{to:"signin",href:""}},[s._v("取消")])],1)],1)])},r=[function(){var s=this,e=s._self._c;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:t("a1d8"),alt:""}})])}],i=(t("d9e2"),t("14d9"),t("aa74")),n=t("7696"),o=t("2fa3"),c={components:{UserForm:i["a"]},data(){return{isProcessing:!1}},methods:{async userSignUp(s){try{if(!s.account.trim()||!s.name.trim()||!s.email.trim()||!s.password.trim()||!s.checkPassword.trim())return o["a"].fire({icon:"warning",title:"欄位不可為空"}),void(this.isProcessing=!1);if(s.name&&s.name.length>50)return o["a"].fire({icon:"warning",title:"名稱字數不能超過 50 "}),void(this.isProcessing=!1);if(s.password.length<4)return o["a"].fire({icon:"warning",title:"密碼長度不得小於 4"}),s.password="",s.checkPassword="",void(this.isProcessing=!1);if(s.password!==s.checkPassword)return o["a"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),s.password="",s.checkPassword="",void(this.isProcessing=!1);this.isProcessing=!0;const{data:e}=await n["a"].signUp({account:s.account,name:s.name,email:s.email,password:s.password,checkPassword:s.checkPassword});if("error"===e.status)throw new Error(e.message);o["a"].fire({icon:"success",title:"帳號註冊成功"}),this.$router.push("/signin")}catch(e){o["a"].fire({icon:"error",title:""+e.response.data.message}),this.isProcessing=!1}}}},u=c,d=(t("235d"),t("2877")),l=Object(d["a"])(u,a,r,!1,null,"71607678",null);e["default"]=l.exports},7696:function(s,e,t){"use strict";var a=t("2fa3");e["a"]={signIn({account:s,password:e}){return a["b"].post("/users/signin",{account:s,password:e})},signUp({account:s,name:e,email:t,password:r,checkPassword:i}){return a["b"].post("/users",{account:s,name:e,email:t,password:r,checkPassword:i})}}},8832:function(s,e,t){"use strict";t("e2d8")},aa74:function(s,e,t){"use strict";var a=function(){var s=this,e=s._self._c;return e("form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),s.handleSubmit.apply(null,arguments)}}},[e("ul",[e("li",{staticClass:"input-area account"},[e("label",{attrs:{for:"account"}},[s._v("帳號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.user.account,expression:"user.account"}],attrs:{type:"text",id:"account",name:"account",placeholder:"請輸入帳號",required:""},domProps:{value:s.user.account},on:{input:function(e){e.target.composing||s.$set(s.user,"account",e.target.value)}}})]),e("li",{staticClass:"input-area name"},[e("label",{attrs:{for:"name"}},[s._v("使用者名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.user.name,expression:"user.name"}],attrs:{type:"text",id:"name",name:"name",placeholder:"請輸入使用者名稱",required:""},domProps:{value:s.user.name},on:{input:function(e){e.target.composing||s.$set(s.user,"name",e.target.value)}}})]),e("li",{staticClass:"input-area email"},[e("label",{attrs:{for:"email"}},[s._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.user.email,expression:"user.email"}],attrs:{type:"email",id:"email",name:"email",placeholder:"請輸入 Email",required:""},domProps:{value:s.user.email},on:{input:function(e){e.target.composing||s.$set(s.user,"email",e.target.value)}}})]),e("li",{staticClass:"input-area password"},[e("label",{attrs:{for:"password"}},[s._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.user.password,expression:"user.password"}],attrs:{type:"password",id:"password",name:"password",placeholder:"請輸入密碼",required:!s.user.isEdit},domProps:{value:s.user.password},on:{input:function(e){e.target.composing||s.$set(s.user,"password",e.target.value)}}})]),e("li",{staticClass:"input-area checkPassword"},[e("label",{attrs:{for:"password"}},[s._v("密碼確認")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.user.checkPassword,expression:"user.checkPassword"}],attrs:{type:"password",id:"checkPassword",name:"checkPassword",placeholder:"請再次輸入密碼",required:!s.user.isEdit},domProps:{value:s.user.checkPassword},on:{input:function(e){e.target.composing||s.$set(s.user,"checkPassword",e.target.value)}}})])]),e("div",{staticClass:"btn"},[s.user.isEdit?e("button",{staticClass:"edit-btn",attrs:{type:"submit",disabled:s.isProcessing}},[s._v(" 儲存 ")]):e("button",{staticClass:"signup-btn",attrs:{type:"submit",disabled:s.isProcessing}},[s._v(" 註冊 ")])])])},r=[],i=t("2f62"),n={props:{isProcessing:{type:Boolean,required:!0}},data(){return{user:{id:-1,name:"",account:"",email:"",password:"",checkPassword:"",isEdit:!1}}},computed:{...Object(i["d"])(["currentUser"])},created(){this.fetchUser()},methods:{fetchUser(){-1!==this.currentUser.id&&(this.user={...this.currentUser,password:"",checkPassword:"",isEdit:!0})},handleSubmit(){console.log("handleSubmit"),this.$emit("after-submit",this.user)}}},o=n,c=(t("8832"),t("2877")),u=Object(c["a"])(o,a,r,!1,null,"4a0c9190",null);e["a"]=u.exports},e2d8:function(s,e,t){}}]);
//# sourceMappingURL=chunk-23fdd9a3.81d2f659.js.map