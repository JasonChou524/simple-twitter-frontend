{"version":3,"sources":["webpack:///./src/components/UserLikes.vue","webpack:///src/components/UserLikes.vue","webpack:///./src/components/UserLikes.vue?6652","webpack:///./src/components/UserLikes.vue?7e84"],"names":["render","_vm","this","_c","_self","isLoading","_l","tweets","tweet","key","id","attrs","on","afterAddLike","afterRemoveLike","staticRenderFns","components","TweetCard","Spinner","props","data","created","watch","user","reply","methods","description","createdAt","RepliesCount","LikesCount","isLiked","User","Toast","icon","title","afterCreateReply","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAAEF,EAAII,UAAW,CAACF,EAAG,YAAYF,EAAIK,GAAIL,EAAIM,QAAQ,SAASC,GAAO,OAAOL,EAAG,aAAa,CAACM,IAAID,EAAME,GAAGC,MAAM,CAAC,MAAQH,GAAOI,GAAG,CAAC,aAAeX,EAAIY,aAAa,gBAAkBZ,EAAIa,uBAAsB,IAExRC,EAAkB,G,gDCsBP,GACfC,YAAAC,iBAAAC,gBACAC,uBACAC,OACA,OACAb,UACAF,eAGAgB,UACA,uBAEAC,OACAC,OACA,uBAEAC,QACA,0BAGAC,SACA,uBACA,IACA,WAAAL,SAAA,qBAAAV,kBACA,uBACAA,aACAgB,0BACAC,sBACAC,4BACAC,wBACAC,WACAC,kBAEA,kBACA,SACAC,aACAC,aACAC,4BAIArB,gBACA,+BACA,SACA,IACA,EACAiB,WACAD,2BAGA,IAGAf,mBACA,+BACA,SACA,IACA,EACAgB,WACAD,2BAGA,IAGAM,mBACA,+BACA,0BACA,IACA,EACAP,+BAGA,MCjGmV,I,YCO/UQ,EAAY,eACd,EACApC,EACAe,GACA,EACA,KACA,KACA,MAIa,aAAAqB,E","file":"js/chunk-2d0c0fa4.0e4730a4.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isLoading)?[_c('spinner')]:_vm._l((_vm.tweets),function(tweet){return _c('tweet-card',{key:tweet.id,attrs:{\"tweet\":tweet},on:{\"afterAddLike\":_vm.afterAddLike,\"afterRemoveLike\":_vm.afterRemoveLike}})})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <template v-if=\"isLoading\">\n      <spinner />\n    </template>\n    <template v-else>\n      <tweet-card\n        v-for=\"tweet in tweets\"\n        :key=\"tweet.id\"\n        :tweet=\"tweet\"\n        @afterAddLike=\"afterAddLike\"\n        @afterRemoveLike=\"afterRemoveLike\"\n      />\n    </template>\n  </div>\n</template>\n\n<script>\nimport TweetCard from './TweetCard.vue'\nimport Spinner from './Spinner.vue'\n\nimport usersAPI from '@/apis/users'\nimport { Toast } from '@/utils/helpers'\n\nexport default {\n  components: { TweetCard, Spinner },\n  props: ['user', 'reply'],\n  data() {\n    return {\n      tweets: [],\n      isLoading: true\n    }\n  },\n  created() {\n    this.fetchUserLikes()\n  },\n  watch: {\n    user() {\n      this.fetchUserLikes()\n    },\n    reply() {\n      this.afterCreateReply()\n    }\n  },\n  methods: {\n    async fetchUserLikes() {\n      try {\n        const { data } = await usersAPI.getUserLikes({ id: this.user.id })\n        this.tweets = data.map((tweet) => ({\n          id: tweet.TweetId,\n          description: tweet.description,\n          createdAt: tweet.createdAt,\n          RepliesCount: tweet.repliedCount,\n          LikesCount: tweet.likesCount,\n          isLiked: true,\n          User: this.user\n        }))\n        this.isLoading = false\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得使用者推文，請稍候再試'\n        })\n      }\n    },\n    afterAddLike(id) {\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === id) {\n          return {\n            ...tweet,\n            isLiked: true,\n            LikesCount: tweet.LikesCount + 1\n          }\n        }\n        return tweet\n      })\n    },\n    afterRemoveLike(id) {\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === id) {\n          return {\n            ...tweet,\n            isLiked: false,\n            LikesCount: tweet.LikesCount - 1\n          }\n        }\n        return tweet\n      })\n    },\n    afterCreateReply() {\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === this.reply.TweetId) {\n          return {\n            ...tweet,\n            RepliesCount: tweet.RepliesCount + 1\n          }\n        }\n        return tweet\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLikes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLikes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserLikes.vue?vue&type=template&id=1e67e7f6&\"\nimport script from \"./UserLikes.vue?vue&type=script&lang=js&\"\nexport * from \"./UserLikes.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}