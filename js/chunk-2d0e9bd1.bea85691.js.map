{"version":3,"sources":["webpack:///./src/components/UserTweets.vue","webpack:///src/components/UserTweets.vue","webpack:///./src/components/UserTweets.vue?5245","webpack:///./src/components/UserTweets.vue?74dd"],"names":["render","_vm","this","_c","_self","isLoading","_l","tweets","tweet","key","id","attrs","on","afterAddLike","afterRemoveLike","staticRenderFns","components","TweetCard","Spinner","props","data","created","watch","user","reply","newTweet","methods","User","Toast","icon","title","isLiked","LikesCount","afterCreateTweet","afterCreateReply","RepliesCount","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAAEF,EAAII,UAAW,CAACF,EAAG,YAAYF,EAAIK,GAAIL,EAAIM,QAAQ,SAASC,GAAO,OAAOL,EAAG,aAAa,CAACM,IAAID,EAAME,GAAGC,MAAM,CAAC,MAAQH,GAAOI,GAAG,CAAC,aAAeX,EAAIY,aAAa,gBAAkBZ,EAAIa,uBAAsB,IAExRC,EAAkB,G,4DCsBP,GACfC,YAAAC,iBAAAC,gBACAC,kCACAC,OACA,OACAb,UACAF,eAGAgB,UACA,wBAEAC,OACAC,OACA,wBAEAC,QACA,yBAEAC,WACA,0BAGAC,SACA,wBACA,IACA,WAAAN,SAAA,sBAAAV,kBACA,0BACA,EACAiB,kBAEA,kBACA,SACAC,aACAC,aACAC,4BAIAjB,gBACA,+BACA,SACA,IACA,EACAkB,WACAC,2BAGA,IAGAlB,mBACA,+BACA,SACA,IACA,EACAiB,WACAC,2BAGA,IAGAC,mBACA,oCAEAC,mBACA,+BACA,0BACA,IACA,EACAC,+BAGA,MClGoV,I,YCOhVC,EAAY,eACd,EACApC,EACAe,GACA,EACA,KACA,KACA,MAIa,aAAAqB,E","file":"js/chunk-2d0e9bd1.bea85691.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isLoading)?[_c('spinner')]:_vm._l((_vm.tweets),function(tweet){return _c('tweet-card',{key:tweet.id,attrs:{\"tweet\":tweet},on:{\"afterAddLike\":_vm.afterAddLike,\"afterRemoveLike\":_vm.afterRemoveLike}})})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <template v-if=\"isLoading\">\n      <spinner />\n    </template>\n    <template v-else>\n      <tweet-card\n        v-for=\"tweet in tweets\"\n        :key=\"tweet.id\"\n        :tweet=\"tweet\"\n        @afterAddLike=\"afterAddLike\"\n        @afterRemoveLike=\"afterRemoveLike\"\n      />\n    </template>\n  </div>\n</template>\n\n<script>\nimport TweetCard from './TweetCard.vue'\nimport Spinner from './Spinner.vue'\n\nimport usersAPI from '@/apis/users'\nimport { Toast } from '@/utils/helpers'\n\nexport default {\n  components: { TweetCard, Spinner },\n  props: ['user', 'reply', 'newTweet'],\n  data() {\n    return {\n      tweets: [],\n      isLoading: true\n    }\n  },\n  created() {\n    this.fetchUserTweets()\n  },\n  watch: {\n    user() {\n      this.fetchUserTweets()\n    },\n    reply() {\n      this.afterCreateReply()\n    },\n    newTweet() {\n      this.afterCreateTweet()\n    }\n  },\n  methods: {\n    async fetchUserTweets() {\n      try {\n        const { data } = await usersAPI.getUserTweets({ id: this.user.id })\n        this.tweets = data.map((tweet) => ({\n          ...tweet,\n          User: this.user\n        }))\n        this.isLoading = false\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得使用者推文，請稍候再試'\n        })\n      }\n    },\n    afterAddLike(id) {\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === id) {\n          return {\n            ...tweet,\n            isLiked: true,\n            LikesCount: tweet.LikesCount + 1\n          }\n        }\n        return tweet\n      })\n    },\n    afterRemoveLike(id) {\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === id) {\n          return {\n            ...tweet,\n            isLiked: false,\n            LikesCount: tweet.LikesCount - 1\n          }\n        }\n        return tweet\n      })\n    },\n    afterCreateTweet() {\n      this.tweets.unshift(this.newTweet)\n    },\n    afterCreateReply() {\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === this.reply.TweetId) {\n          return {\n            ...tweet,\n            RepliesCount: tweet.RepliesCount + 1\n          }\n        }\n        return tweet\n      })\n    }\n  }\n}\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserTweets.vue?vue&type=template&id=1799b23e&\"\nimport script from \"./UserTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./UserTweets.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}