(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf208578"],{"079b":function(e,t,s){},8555:function(e,t,s){"use strict";s("079b")},8832:function(e,t,s){"use strict";s("e2d8")},aa74:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[t("ul",[t("li",{staticClass:"input-area account"},[t("label",{attrs:{for:"account"}},[e._v("帳號")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],attrs:{type:"text",id:"account",name:"account",placeholder:"請輸入帳號",required:""},domProps:{value:e.user.account},on:{input:function(t){t.target.composing||e.$set(e.user,"account",t.target.value)}}})]),t("li",{staticClass:"input-area name"},[t("label",{attrs:{for:"name"}},[e._v("使用者名稱")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text",id:"name",name:"name",placeholder:"請輸入使用者名稱",required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),t("li",{staticClass:"input-area email"},[t("label",{attrs:{for:"email"}},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",id:"email",name:"email",placeholder:"請輸入 Email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),t("li",{staticClass:"input-area password"},[t("label",{attrs:{for:"password"}},[e._v("密碼")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",id:"password",name:"password",placeholder:"請輸入密碼",required:!e.user.isEdit},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),t("li",{staticClass:"input-area checkPassword"},[t("label",{attrs:{for:"password"}},[e._v("密碼確認")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.checkPassword,expression:"user.checkPassword"}],attrs:{type:"password",id:"checkPassword",name:"checkPassword",placeholder:"請再次輸入密碼",required:!e.user.isEdit},domProps:{value:e.user.checkPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"checkPassword",t.target.value)}}})])]),t("div",{staticClass:"btn"},[e.user.isEdit?t("button",{staticClass:"edit-btn",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 儲存 ")]):t("button",{staticClass:"signup-btn",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 註冊 ")])])])},r=[],i=s("2f62"),o={props:{isProcessing:{type:Boolean,required:!0}},data(){return{user:{id:-1,name:"",account:"",email:"",password:"",checkPassword:"",isEdit:!1}}},computed:{...Object(i["d"])(["currentUser"])},created(){this.fetchUser()},methods:{fetchUser(){-1!==this.currentUser.id&&(this.user={...this.currentUser,password:"",checkPassword:"",isEdit:!0})},handleSubmit(){console.log("handleSubmit"),this.$emit("after-submit",this.user)}}},n=o,c=(s("8832"),s("2877")),u=Object(c["a"])(n,a,r,!1,null,"4a0c9190",null);t["a"]=u.exports},da5c:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"edit-container"},[t("div",{staticClass:"row"},[t("nav-tabs",{staticClass:"col-3",on:{clickCreateBtn:e.openCreateModal}}),t("section",{staticClass:"col-6"},[t("div",{staticClass:"edit"},[e._m(0),t("user-form",{attrs:{"is-processing":e.isProcessing},on:{"after-submit":e.userEdit}})],1)])],1),e.isCreateModalShow?t("tweet-create-modal",{on:{clickCloseBtn:e.closeCreateModal,afterCreateTweet:e.closeCreateModal}}):e._e()],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"title"},[t("h4",[e._v("帳戶設定")])])}],i=(s("d9e2"),s("14d9"),s("8bb1")),o=s("aa74"),n=s("8d93"),c=s("2f62"),u=s("2fa3"),d=s("4cce"),l={components:{NavTabs:i["a"],UserForm:o["a"],TweetCreateModal:n["a"]},data(){return{editData:{},isProcessing:!1,isCreateModalShow:!1}},computed:{...Object(c["d"])(["currentUser"])},methods:{async userEdit(e){try{if(this.formValidator(e),!Object.keys(this.editData).length)return;this.isProcessing=!0;const{data:t}=await d["a"].userEdit({id:this.currentUser.id,editData:this.editData});if("error"===t.status)throw new Error(t);u["a"].fire({icon:"success",title:"編輯成功"}),this.$router.push("/")}catch(t){const{data:e}=t.response;u["a"].fire({icon:"error",title:""+e.message}),this.isProcessing=!1}},formValidator(e){e.account.trim()&&e.name.trim()&&e.email.trim()?e.password.trim()===e.checkPassword.trim()?(e.password.trim()&&(this.editData.password=e.password,this.editData.checkPassword=e.checkPassword),this.currentUser.account!==e.account&&(this.editData.account=e.account),this.currentUser.name!==e.name&&(this.editData.name=e.name),this.currentUser.email!==e.email&&(this.editData.email=e.email)):u["a"].fire({icon:"error",title:"兩次輸入的密碼不同"}):u["a"].fire({icon:"error",title:"帳號、名稱和信箱不可空白"})},openCreateModal(){this.isCreateModalShow=!0},closeCreateModal(){this.isCreateModalShow=!1}}},m=l,p=(s("8555"),s("2877")),h=Object(p["a"])(m,a,r,!1,null,"86635556",null);t["default"]=h.exports},e2d8:function(e,t,s){}}]);
//# sourceMappingURL=chunk-cf208578.f6d70c52.js.map